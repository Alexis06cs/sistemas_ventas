<!-- clientes.component.html -->
<section class="p-6">
  <div class="bg-white rounded-2xl border shadow-sm">
    <!-- Header -->
    <div class="px-6 py-5 flex items-start justify-between gap-4">
      <div>
        <h2 class="text-lg font-semibold text-gray-900">Clientes</h2>
        <p class="mt-1 text-sm text-gray-500">
          Lista de clientes con su nombre, cargo, email y rol.
        </p>
      </div>
      <button
        class="inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
        (click)="onAddCliente()">
        Add client
      </button>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table class="min-w-full table-fixed border-t">
        <thead>
          <tr class="text-left text-sm text-gray-600">
            <th class="px-6 py-3 w-[34%] font-medium">Name</th>
            <th class="px-6 py-3 w-[22%] font-medium">Title</th>
            <th class="px-6 py-3 w-[26%] font-medium">Email</th>
            <th class="px-6 py-3 w-[12%] font-medium">Role</th>
            <th class="px-6 py-3 w-[6%]"></th>
          </tr>
        </thead>
        <tbody class="divide-y">
          <!-- Empty state -->
          <tr *ngIf="!clientes || clientes.length === 0">
            <td colspan="5" class="px-6 py-12 text-center">
              <div class="text-sm text-gray-500">No hay clientes registrados.</div>
            </td>
          </tr>

          <!-- Rows -->
          <tr *ngFor="let c of clientes; trackBy: trackByClienteId" class="text-sm">
            <!-- Name -->
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <img
                  class="h-9 w-9 rounded-full object-cover"
                  [src]="c.avatarUrl || 'https://i.pravatar.cc/80?u=' + c.email"
                  alt="avatar" />
                <div class="min-w-0">
                  <div class="font-medium text-gray-900 truncate">{{ c.nombre }}</div>
                  <div class="text-gray-500 truncate">{{ c.empresa || '—' }}</div>
                </div>
              </div>
            </td>

            <!-- Title -->
            <td class="px-6 py-4">
              <span class="text-gray-700">{{ c.cargo || '—' }}</span>
            </td>

            <!-- Email -->
            <td class="px-6 py-4">
              <a class="text-indigo-600 hover:underline break-all" [href]="'mailto:' + c.email">
                {{ c.email }}
              </a>
            </td>

            <!-- Role -->
            <td class="px-6 py-4">
              <span
                class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium"
                [ngClass]="{
                  'bg-emerald-50 text-emerald-700 ring-1 ring-emerald-600/20': c.rol === 'CLIENTE',
                  'bg-indigo-50 text-indigo-700 ring-1 ring-indigo-600/20': c.rol === 'ADMIN',
                  'bg-amber-50 text-amber-700 ring-1 ring-amber-600/20': c.rol === 'VENDEDOR',
                  'bg-slate-100 text-slate-700 ring-1 ring-slate-400/30': c.rol !== 'CLIENTE' && c.rol !== 'ADMIN' && c.rol !== 'VENDEDOR'
                }">
                {{ c.rol }}
              </span>
            </td>

            <!-- Actions -->
            <td class="px-6 py-4 text-right">
              <button
                class="text-indigo-600 hover:text-indigo-800 font-medium"
                (click)="onEditCliente(c)">
                Edit
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
